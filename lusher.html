<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Test des couleurs de Lüsher - Version francaise</title>
    <meta name="author" content="Tanguy Bodin-Hullin">
    <meta name="translator" content="Tanguy Bodin-Hullin">
    <meta name="last-update" content="24/03/2020">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="./assets/css/styles.css">
    <!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<!--
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
-->
<style></style>
  </head>
  <body>
    <div class="container">
        <div class="row">
          <div class="col-sm">
            <!-- One of two columns -->
          </div>
          <div class="col-sm">
            <!-- One of two columns -->
          </div>
        </div>
    </div><!-- end of container -->
      	<div class="choices"></div>
      	<div align="center">
      	   <div class="instruction">
             <p class="instruction">Cliquez sur la couleur que vous aimez le plus.</p>
           </div>
           <table>
            <tr>
                <td><div id="coul3" class="block1 block"></div></td>
                <td><div id="coul4" class="block2 block"></div></td>
                <td><div id="coul2" class="block3 block"></div></td>
                <td><div id="coul5" class="block4 block"></div></td>
            </tr>
            <tr>
                <td><div id="coul1" class="block5 block"></div></td>
                <td><div id="coul6" class="block6 block"></div></td>
                <td><div id="coul0" class="block7 block"></div></td>
                <td><div id="coul7" class="block0 block"></div></td>
            </tr>
           </table>
           <input type="submit" name="toggle1" value="Recommencer !" id="toggle1" />
      	</div>


  <script type="text/javascript">

    $(function(){
      // $(document).ready(function() { // ANCIEN CODE JQUERY
      var debug = true;
      if (debug===true) {
        console.log("Mode debug activé : traces affichées.")
      } else {
        console.log("Mode debug inactif. Vous pouvez l'activer en mettant la variable debug à true.")
      }
      var tabChoices = [];
      var so = 0;
      var vk = 0;
      var numRx = /block(\d)/; // Expression régulière Regex (permet de récupérer le numéro du block)
      var so_interpretation = [
        "Absence de tension neuropsychique improductive. Le sujet testé est actif, ses actions sont diverses et son efficacité est élevée. L'attitude émotionnelle est optimiste. Une maîtrise de soi volontaire est développée. En même temps, la volonté n'est pas un instrument de suppression d'aucune partie de la personnalité; elle harmonise seulement les désirs divers, mais non contradictoires, du sujet. Avec la motivation appropriée, le sujet est capable de travailler intensivement pendant longtemps. Dans les situations extrêmes, il se mobilise efficacement et se concentre sur la tâche ",

        " Un niveau insignifiant de tension neuropsychique improductive. Le sujet est dominé par l'attitude envers l'activité active. Ses ressources énergétiques sont suffisantes pour des explosions plus ou moins régulières de suractivité et de tension, inaccessibles à la plupart des autres. Dans les conditions d'une activité motivée (intéressante), elle ne rencontre pas de difficultés de stockage et de reproduction opérationnelle et à long terme des informations. En général, il ne recherche pas de sensations fortes. Il sort des situations stressantes avec dignité. ",

        " Le niveau moyen de tension neuropsychique improductive. Le sujet fait face à ses fonctions dans les conditions moyennes en vigueur. Dans l'environnement habituel, il passe du travail aux loisirs et retour, d'un type d'activité à l'autre sans difficultés importantes. Si nécessaire, il est capable de surmonter la fatigue par un effort volontaire, mais après cela, un long «train» de capacité de travail réduite se voit dans ses affaires et son bien-être. Pour maintenir la santé et la performance, le sujet nécessite une séparation relativement claire et subjective du temps de travail et de repos. ",

        " Un niveau accru de tension neuropsychique improductive. Le potentiel de l'activité utile du sujet est très faible. Pour cette raison, il est obligé de se forcer à faire certaines choses irremplaçables. La commande voluelle à action constante renforce la fatigue. Un travail long et intensif est susceptible d'être coûteux pour le sujet au sens neuropsychique. De plus, il sera très inégal en termes de productivité et de qualité à différentes périodes de temps Le contexte émotionnel général se caractérise par une excitabilité, une anxiété et une incertitude accrues. Dans une situation stressante, une rupture d'activité et de comportement est probable. ",

        " Tension neuropsychique improductive sévère. Le sujet est extrêmement fatigué. Son attention est facilement distraite par des choses étrangères, tout en étant caractéristique de «rester coincé» dans des expériences émotionnelles. L'absence d'une hiérarchie stable des motifs rend le sujet réactif et flou. L'humeur dans les plus brefs délais peut osciller entre exaltation et dépression, excitation et impuissance. Dans un état émotionnel, l'anxiété, la prémonition de troubles, l'impuissance et le manque de désir de faire quoi que ce soit prévalent. Dans une situation extrême, le sujet n'est pas fiable."
      ];

      var vk_interpretation = ["Épuisement, installation dans l'inaction. Surmenage chronique. Une réponse passive aux difficultés, un manque de préparation au stress et une action adéquate dans des situations stressantes sont caractéristiques. Des mesures de restauration diversifiées et volumineuses sont nécessaires. ",

      " Installation pour optimiser la dépense des forces. Besoin modéré de récupération et de repos. Le potentiel énergétique est faible, mais tout à fait suffisant pour une activité réussie dans les conditions calmes habituelles. Dans une situation extrême, un retard d'orientation et de prise de décision est probable. ",

      " Mobilisation optimale des ressources physiques et mentales, mise en action active. Dans une situation extrême, la vitesse d'orientation et de prise de décision la plus probable, la faisabilité et le succès des actions. ",

      " Excitation excessive, débrouillardise. Le niveau d'excitation est excessivement élevé. Il y a des cas fréquents où le sujet fait quelque chose non pas pour le bien lui-même, mais uniquement pour se décharger. Dans les situations difficiles, des réactions fébriles se forment facilement: impulsivité, impatience, diminution de la maîtrise de soi, éruptions cutanées. Dans les situations extrêmes, la plus faible efficacité des actions, les réactions de panique. Divers traitements relaxants et apaisants sont nécessaires."
    ];
    //rouge (3), jaune (4), vert (2), violet (5), bleu (1), marron (6), gris (0), noir (7)
    var autnorma = [3, 4, 2, 5, 1, 6, 0, 7];
    // pour info.
    var couleursJson = [
      { "gris"   : "0" },
      { "bleu"   : "1" },
      { "vert"   : "2" },
      { "rouge"  : "3" },
      { "jaune"  : "4" },
      { "violet" : "5" },
      { "marron" : "6" },
      { "noir"   : "7" },
    ];
    var instructionString = ["Cliquez sur la couleur que vous préférez le plus.","Parmi les couleurs restantes, laquelle aimez-vous le plus ?"];
    var itemNumber = 0;

    $('.block').click(function(event) {
        if (debug===true) console.log("block click",$(this));
        // trigger event : On cache le bloc qui a été cliqué
        event.preventDefault();
        $( this ).hide();
        // la classe est écrite comme suit : class="block1 block"
        // On va récupérer le premier élément : ici "block1"
        itemNumber = numRx.exec(
           $(this).attr('class')
        )[1];
        // On ajoute l'élément au tableau des choix successifs
        tabChoices.push(parseInt(itemNumber));
        // if (debug===true) console.log("Carte choisie (et cachée) : ", itemNumber)
        if (debug===true) console.log("Choix successifs : ", tabChoices)
        if (tabChoices.length == 1) {
          $('p.instruction').remove();
          $("div.instruction").append("<p class=\"instruction\">"+instructionString[1]+"</p>");
        }
        if (tabChoices.length == 8) {
            // Après que le dernier élément ait été cliqué, on montre les résultats
            showchoices();
        }
    });

    // Appui sur le bouton "Recommencer"
    $('#toggle1').click(function() {
        if (debug===true) console.log("#toggle1 click")
        $('.block').show(); // On montre tous les blocks
        tabChoices = []; // on réinitialise le tableau des choix
        $('p.choices').remove(); // On enlève les résultats
        $('p.instruction').remove(); // On enlève les instructions
        $("div.instruction").append("<p class=\"instruction\">"+instructionString[0]+"</p>");
    });

    // Fonction qui montre les choix
    function showchoices() {
        $('p.instruction').remove(); // on enlève le bloc d'instructions
        so = 0; // Ecart total
        vk = 0; // Coefficient vegetatif
        var so_string = "Description";
        var vk_string = "Description";
        var so_interval = "[]";
        var vk_interval = "[]";
        var i;

        // Parcours du tableau des choix
        for (i = 0; i < tabChoices.length; i++) {
            // Pour chaque élément, on ajoute de façon cumulée à so la valeur absolue de la différence
            // entre la norme et la valeur choisie
            if (debug===true) console.log("" + [i] + " " + so + " + ABS(Norme(" + autnorma.indexOf(i) + ")-Choix(" + tabChoices.indexOf(i) + "))")
            so += Math.abs(autnorma.indexOf(i) - tabChoices.indexOf(i));

        }
        if (debug===true) console.log("Ecart total = " + so)

        /* Calcul du coefficient végétatif */
        vk = (18 - tabChoices.indexOf(3) - tabChoices.indexOf(4) - 2) / (18 - tabChoices.indexOf(1) - tabChoices.indexOf(2) - 2);
        vk = Math.round(vk * 10) / 10;

        /* Sélection de l'interprétation pour l'écart global */
        if (so <= 6) {
            so_string = so_interpretation[0];
            so_interval = "[0 <= so <= 6]";
        }
        else if (so <= 12) {
            so_string = so_interpretation[1];
            so_interval = "[6 < so <= 12]";
        }
        else if (so <= 20) {
            so_string = so_interpretation[2];
            so_interval = "[12 < so <= 20]";
        }
        else if (so <= 26) {
            so_string = so_interpretation[3];
            so_interval = "[20 < so <= 26]";
        }
        else if (so <= 32) {
            so_string = so_interpretation[4];
            so_interval = "[26 < so <= 32]";
        }

        // Sélection de l'interpretation pour le coefficient végétatif
        if (vk <= 0.4) {
            vk_string = vk_interpretation[0];
            vk_interval = "[0 <=  vk <= 0,4]";
        }
        else if (vk <= 0.8) {
            vk_string = vk_interpretation[1];
            vk_interval = "[0,4 < vk <= 0,8]";
        }
        else if (vk <= 1.9) {
            vk_string = vk_interpretation[2];
            vk_interval = "[0,8 < vk <= 1,9]";
        }
        else if (vk <= 5) {
            vk_string = vk_interpretation[3];
            vk_interval = "[1,9 < vk <= 5]";
        }

        $("div.choices").append("<p class=\"choices\">Choix de couleur : " + tabChoices.join("-") + "</p>");
        $("div.choices").append("<p class=\"choices\">Écart total (СО): " + so + " avec " + so_interval + "</p>");
        $("div.choices").append("<p class=\"choices description\">   " + so_string + "</p>");
        $("div.choices").append("<p class=\"choices\">Coefficient végétatif (ВК): " + vk + " avec " + vk_interval +"</p>");
        $("div.choices").append("<p class=\"choices description\">   " + vk_string + "</p>");
      }

    }); // fin JQuery
    </script>
  </body>
</html>
